variable "project_id" {}
variable "zone" {}
variable "gcve_pc_management_nw" {}
variable "vpc_network" {}
variable "gcve_network" {}


resource "google_vmwareengine_private_cloud" "vmw-engine-pc" {
  location    = var.zone
  project     = var.project_id
  name        = "testvmware-engine-pc"
  network_config {
    management_cidr       = var.gcve_pc_management_nw
    vmware_engine_network = var.gcve_network.id
  }

  management_cluster {
    cluster_id = "sample-mgmt-cluster"
    node_type_configs {
      node_type_id = "standard-72"
      node_count   = 3
    }
  }
}

resource "google_vmwareengine_network_peering" "vmw-engine-network-peering" {
    name = "network-peering"
    project = var.project_id
    peer_network = var.vpc_network.id
    peer_network_type = "STANDARD"
    vmware_engine_network = var.gcve_network.id
}
